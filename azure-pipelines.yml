trigger:
  - master


stages:
  - stage: Build
    displayName: Build Package
    jobs: 
    - job: BuildPackage
      pool: Prince
      steps:    
      - task: UiPathPack@2
        inputs:
          versionType: 'AutoVersion'
          projectJsonPath: $(projectPath)
          outputType: 'Process'
          orchestratorConnection: 'ConnectFin'
          outputPath: $(projectPackagePath)
      - publish: $(projectPackagePath)
        artifact: drop
        
- stage: DeployDEV
    displayName: Deploy build artifact to DEV
    dependsOn: Build
    condition: succeeded()
    jobs:
      - deployment: deployDEV
        displayName: Deploy package to DEV Orchestrator
        pool: LAPTOP-Q338O4FK
        environment: DEV
        strategy:
         runOnce:
          deploy:
           steps:
            - task: UiPathDeploy@2
              inputs:
                orchestratorConnection: 'UiPath DEV'
                packagesPath: '$(Pipeline.Workspace)\drop\'
                folderName: 'Shared'
                
  